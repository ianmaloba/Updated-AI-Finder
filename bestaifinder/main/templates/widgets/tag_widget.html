<style>
    .tag-container {
        display: flex;
        flex-wrap: wrap;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
        background-color: #fff;
    }
    .tag-label {
        display: inline-flex;
        align-items: center;
        margin-right: 10px;
        font-size: 0.9rem;
    }
    .tag-checkbox {
        margin-right: 5px;
    }
</style>
<div class="tag-container">
    {% for group, options, index in widget.optgroups %}
        {% for option in options %}
            <label class="tag-label">
                <input type="checkbox" name="{{ widget.name }}" value="{{ option.value }}" 
                       class="tag-checkbox"
                       {% if option.selected %}checked{% endif %}>
                {{ option.label }}{% if not forloop.last %},{% endif %}
            </label>
        {% endfor %}
    {% endfor %}
</div>